{"version":3,"file":"ember-drag-drop.js","sources":["../../src/test-support/ember-drag-drop.js"],"sourcesContent":["/* eslint-disable prettier/prettier */\n/* global triggerEvent , andThen */\nimport { run } from '@ember/runloop';\nimport MockDataTransfer from './helpers/data-transfer.js';\n\nfunction drop($dragHandle, dropCssPath, dragEvent) {\n  let dropTarget = document.querySelector(dropCssPath);\n\n  if (dropTarget.length === 0) {\n    throw new Error(`There are no drop targets by the given selector: '${dropCssPath}'`);\n  }\n\n  run(() => {\n    triggerEvent(dropTarget, 'dragover', MockDataTransfer.makeMockEvent());\n  });\n\n  run(() => {\n    triggerEvent(dropTarget, 'drop', MockDataTransfer.makeMockEvent(dragEvent.dataTransfer.get('data.payload')));\n  });\n\n  run(() => {\n    triggerEvent($dragHandle, 'dragend', MockDataTransfer.makeMockEvent());\n  });\n}\n\nexport function drag(cssPath, options={}) {\n  let dragEvent = MockDataTransfer.makeMockEvent();\n  let dragHandle = document.querySelector(cssPath);\n\n  run(() => {\n    triggerEvent(dragHandle, 'mouseover');\n  });\n\n  run(() => {\n    triggerEvent(dragHandle, 'dragstart', dragEvent);\n  });\n\n  andThen(function() {\n    if (options.beforeDrop) {\n      options.beforeDrop.call();\n    }\n  });\n\n  andThen(function() {\n    if (options.drop) {\n      drop(dragHandle, options.drop, dragEvent);\n    }\n  });\n}\n"],"names":["drop","$dragHandle","dropCssPath","dragEvent","dropTarget","document","querySelector","length","Error","run","triggerEvent","MockDataTransfer","makeMockEvent","dataTransfer","get","drag","cssPath","options","dragHandle","andThen","beforeDrop","call"],"mappings":";;;AAAA;AACA;AAIA,SAASA,IAAIA,CAACC,WAAW,EAAEC,WAAW,EAAEC,SAAS,EAAE;AACjD,EAAA,IAAIC,UAAU,GAAGC,QAAQ,CAACC,aAAa,CAACJ,WAAW,CAAC;AAEpD,EAAA,IAAIE,UAAU,CAACG,MAAM,KAAK,CAAC,EAAE;AAC3B,IAAA,MAAM,IAAIC,KAAK,CAAC,CAAA,kDAAA,EAAqDN,WAAW,GAAG,CAAC;AACtF,EAAA;AAEAO,EAAAA,GAAG,CAAC,MAAM;IACRC,YAAY,CAACN,UAAU,EAAE,UAAU,EAAEO,CAAgB,CAACC,aAAa,EAAE,CAAC;AACxE,EAAA,CAAC,CAAC;AAEFH,EAAAA,GAAG,CAAC,MAAM;AACRC,IAAAA,YAAY,CAACN,UAAU,EAAE,MAAM,EAAEO,CAAgB,CAACC,aAAa,CAACT,SAAS,CAACU,YAAY,CAACC,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC;AAC9G,EAAA,CAAC,CAAC;AAEFL,EAAAA,GAAG,CAAC,MAAM;IACRC,YAAY,CAACT,WAAW,EAAE,SAAS,EAAEU,CAAgB,CAACC,aAAa,EAAE,CAAC;AACxE,EAAA,CAAC,CAAC;AACJ;AAEO,SAASG,IAAIA,CAACC,OAAO,EAAEC,OAAO,GAAC,EAAE,EAAE;AACxC,EAAA,IAAId,SAAS,GAAGQ,CAAgB,CAACC,aAAa,EAAE;AAChD,EAAA,IAAIM,UAAU,GAAGb,QAAQ,CAACC,aAAa,CAACU,OAAO,CAAC;AAEhDP,EAAAA,GAAG,CAAC,MAAM;AACRC,IAAAA,YAAY,CAACQ,UAAU,EAAE,WAAW,CAAC;AACvC,EAAA,CAAC,CAAC;AAEFT,EAAAA,GAAG,CAAC,MAAM;AACRC,IAAAA,YAAY,CAACQ,UAAU,EAAE,WAAW,EAAEf,SAAS,CAAC;AAClD,EAAA,CAAC,CAAC;AAEFgB,EAAAA,OAAO,CAAC,YAAW;IACjB,IAAIF,OAAO,CAACG,UAAU,EAAE;AACtBH,MAAAA,OAAO,CAACG,UAAU,CAACC,IAAI,EAAE;AAC3B,IAAA;AACF,EAAA,CAAC,CAAC;AAEFF,EAAAA,OAAO,CAAC,YAAW;IACjB,IAAIF,OAAO,CAACjB,IAAI,EAAE;MAChBA,IAAI,CAACkB,UAAU,EAAED,OAAO,CAACjB,IAAI,EAAEG,SAAS,CAAC;AAC3C,IAAA;AACF,EAAA,CAAC,CAAC;AACJ;;;;"}